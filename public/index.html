<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html ng-app="scotchTeam">
<head>
	<!-- META -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

	<title>Node/Angular Team App</title>

	<!-- SCROLLS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"><!-- load bootstrap -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
	<style>
		html 					{ overflow-y:scroll; }
		body 					{ padding-top:50px; }
		#team-list 				{ margin-bottom:30px; }
		#team-form 	 			{ margin-bottom:50px; }
        .blueText                {color:blue}
        .redText                {color:red}
	</style>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.min.js"></script><!-- load angular -->

	<script src="js/controllers/main.js"></script> <!-- load up our controller -->
	<script src="js/services/teams.js"></script> <!-- load our team service -->
	<script src="js/core.js"></script> <!-- load our main application -->

</head>
<!-- SET THE CONTROLLER -->
<body ng-controller="mainController">
	<div class="container">

		<div class="jumbotron text-center">
			<h1>ABC<span class="label label-info"></span></h1>
			<span ng-click="clearAll()">Clear everything</span> | <span ng-click="init()">Fetch teams</span> |
			<span ng-click="updateCompletedEvents()">updateCompletedEvents</span>
            <div>
                Fetch games for team:
                <span ng-repeat="team in teams" ng-click="initEvents(team.team_id)">
                    {{ team.full_name }}
                </span>
            </div>
		</div>

		<!-- TEAM LIST -->
		<div id="team-list" class="row">
			<div class="col-lg-6">
                By team:
                <span ng-repeat="team in teams" ng-click="selectTeam(team.team_id)" ng-class="{blueText:team.team_id==currentTeam}">
                    {{ team.full_name }} |
                </span>
			</div>
            <div class="col-lg-6">

                <div ng-repeat="team in teams" ng-show="team.team_id == currentTeam">
                    <div ng-repeat="event in events| orderBy:'event_start_date_time':false"
                         ng-if="event.event_status=='completed' && event.event_id.indexOf(team.team_id)>-1"
                         ng-class="{blueText:event.event_status=='scheduled',redText:event.event_status=='completed'}">
                        <span ng-click="updateEvent(event.event_id)">update</span>
                        <span ng-click="processEvent(event.event_id)">process</span>
                        {{teamsById[event.away_team_id].full_name}} at
                        {{teamsById[event.home_team_id].full_name}} on
                        {{event.event_start_date_time | date:'mediumDate'}}
                        <!--{{event.fullModel.home_period_scores}}-->
                        <!--{{event.fullModel.away_period_scores}}-->
                        -
                        {{event.pointsTotalDiff}} -
                        {{event.pointsFinalDiff}} -
                        {{event.leadChanges}} -
                        {{event.scorePointsDiff}}
                        <!--<div ng-repeat="stat in event.fullModel.away_stats">-->
                            <!--{{stat.display_name}} {{stat.points}},-->
                        <!--</div>-->
                    </div>
                </div>

                <p class="text-center" ng-show="loading">
                    <span class="fa fa-spinner fa-spin fa-3x"></span>
                </p>

            </div>
		</div>

	</div>

</body>
</html>
